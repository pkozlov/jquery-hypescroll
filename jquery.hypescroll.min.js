/*
 *  jQuery HypeScroll - v0.0.1
 *  jQuery plugin for Tumult Hype animation on scroll
 *  http://github.com/pkozlov/jquery-hypescroll/
 *
 *  Made by Pavel Kozlov
 *  Under MIT License
 */
!function(a,b){function c(c,f){this.element=a(c),this.options=a.extend({},e,f),this._defaults=e,this._name=d,this.height=this.element.height(),this.startpoint=this.options.offset.start,this.endpoint=this.startpoint+this.height+this.options.offset.end,"undefined"!=typeof HYPE&&null!==HYPE?this.init():("HYPE_eventListeners"in b==!1&&(b.HYPE_eventListeners=Array()),b.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a){return function(b,c,d){return a.init(b,c,d)}}(this)}))}var d="hypescroll",e={timeline:"Main Timeline",documentName:null,hypeDocument:null,offset:{start:0,end:0}};c.prototype={init:function(a){if(null!==this.options.documentName){if(a&&a.documentName()===this.options.documentName?(this.documentName=this.options.documentName,this.hypeDocument=a):(this.documentName=this.options.documentName,this.hypeDocument=HYPE.documents[this.documentName]),"undefined"==typeof this.hypeDocument||null===this.hypeDocument)throw"HypeScroll: HYPE document with documentName '"+this.documentName+"' is not found"}else{if(null===this.options.hypeDocument)throw"HypeScroll: documentName or hypeDocument is required";this.hypeDocument=a&&this.options.hypeDocument.documentName()===a.documentName()?a:this.options.hypeDocument,this.documentName=this.hypeDocument.documentName()}setTimeout(function(a){return function(){return a.afterInit()}}(this),0)},afterInit:function(){this.hypeDocument.pauseTimelineNamed(this.options.timeline),this.duration=this.hypeDocument.durationForTimelineNamed(this.options.timeline),this.tpp=this.duration/(this.height+this.options.offset.end),this.onScroll(),a(b).scroll(function(a){return function(){return a.onScroll()}}(this))},onScroll:function(){var c,d,e=this.element.offset().top-a(b).scrollTop()+this.options.offset.end;this.duration&&e>this.startpoint&&e<this.endpoint?(c=e-this.startpoint,d=this.duration-c*this.tpp,this.hypeDocument.goToTimeInTimelineNamed(d,this.options.timeline)):e<this.startpoint?this.hypeDocument.goToTimeInTimelineNamed(this.duration,this.options.timeline):e>this.endpoint&&this.hypeDocument.goToTimeInTimelineNamed(0,this.options.timeline)}},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);